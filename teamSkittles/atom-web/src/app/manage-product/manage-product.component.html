<ng-container>
  <p-toolbar>
    <div class="p-toolbar-group-start">


      <p-button [label]="'Автоматический расчет приоритетов'"
                icon="pi pi-sort-amount-down-alt" styleClass="p-button-info"
                (onClick)="countAutomaticsOrder()"></p-button>

      <p-button [label]="'Сохранить план'"
                icon="pi pi-sort-amount-down-alt" styleClass="p-button-info"
                (onClick)="savePlan()"></p-button>


    </div>
    <div class="p-toolbar-group-start">
      <label style="margin-right: 5px; font-weight: bold">Ручной Режим</label>
      <p-inputSwitch [(ngModel)]="isManual"></p-inputSwitch>
    </div>
  </p-toolbar>
  <p-table [value]="selectedRequests" [tableStyle]="{'min-width': '50rem'}">
    <ng-template pTemplate="header">
      <tr>
        <th style="width:3rem" *ngIf="isManual"></th>
        <th>Приоритет</th>
        <th>Id</th>
        <th>Номер</th>
        <th>Дата</th>
        <th>Описание</th>
        <th>Дата Выпуска</th>
        <th>Утверждение</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-req let-index="rowIndex">
      <tr [pReorderableRow]="isManual ? index : 0" [draggable]="false" (drop)="onDropChange()">
        <td *ngIf="isManual">
          <span class="pi pi-bars" pReorderableRowHandle></span>
        </td>
        <td>{{req.priority}}</td>
        <td>{{req.id}}</td>
        <td>{{req.number}}</td>
        <td>{{req.date}}</td>
        <td>{{req.description}}</td>
        <td>{{req.releaseDate}}</td>
        <td>
          <p-button [disabled]="!(req.productionPlanStatus == StatusRequest.BLANK || req.productionPlanStatus == null) "
                    icon="pi pi-check" styleClass="p-button-success"
                    (onClick)="approvePosition(req.id)"></p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>

</ng-container>
<p-toast></p-toast>
