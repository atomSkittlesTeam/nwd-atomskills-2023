# Инструкция по развёртыванию системы

Приложение *MESkittles* состоит из клиентского веб—приложения и серверной части.
Веб-приложение разработано c помощью *Angular 15*.
Серверная часть представляет собой сервис, разработанный с помощью *Java 17* и фреймворка *Spring Boot 3*.


Для запуска на платформе Windows можно скачать собранный дистрибутив по [ссылке](https://drive.google.com/file/d/1jJxTPns49Bwdtb41q0IBj7AFYUM70iGN/view?usp=sharing "MESkittles-dist.zip").

---

## Инструкция по запуску Java-сервиса
Java-сервис и его окружение лежат в папке `backend`. В папке содержатся:

* MESkittles.jar - java приложение
* run-back.bat - файл для запуска java приложения
* application.yml - основной конфигурационный файл
* application-h2.yml - конфигурация СУБД h2
* application-pg.yml - конфигурация СУБД PostgreSQL
* jre-17.0.6 - JRE

Чтобы запустить java-сервис, достаточно запустить файл `run-back.bat`. Перед запуском рекомендуется отредактировать конфигурационные файлы. В конфигурационном файле `application.yml` прописаны url для доступа к внешней CRM-системе и Автоматизированному рабочему месту (в т.ч. к станкам). Вам необходимо прописать в данном файле данные пути:
```
api:
  url: "http://192.168.1.44:1040"  #Путь к CRM-системе
  cut-url: "http://192.168.1.44:" #Укороченный путь, созданный для удобства генерации url для доступа к API станков
```

 Java-сервис может быть подключен c помощью JDBC к различным СУБД. Мы гарантируем работу с *PostgreSQL* и *H2*.
 
 В целях упрощения по умолчанию сервис запускается в режиме работы с СУБД H2. За выбор режима работы с соответствующей СУБД в конфигурационном файле `application.yml` есть следующая настройка: 
```
spring:
  profiles:
    active: "h2" #для режима работы с PostgreSQL данная настройка должна принимать "pg"
```
Вы можете отредактировать конкретные настройки подключения к СУБД в файле *application-pg.yml* или в *application-h2.yml* в зависимости от выбранного режима profiles.active в *application.yml*.

По умолчанию сервис запускается на порту 8081.

---

## Инструкция по запуску клиента
 Запуск веб-приложения Angular осуществляется с помощью nginx. Для запуска *nginx* достаточно запустить файл *nginx.exe*, который располагается в папке `frontend/nginx-1.22.1`. По умолчанию nginx запускается на 80 порту. 
 
 
 Для доступа к приложению необходимо открыть браузер и перейти на адрес *localhost*. В качестве браузера рекомендуется использование *Google Chrome* актуальной версии. Если все действия были проведены успешно, то в браузере откроется страничка авторизации. 